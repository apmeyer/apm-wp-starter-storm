@use "shared" as *;

.apm-accordion-item {
  margin-top: 0;

  + .apm-accordion-item {
    border-top: 1px solid var(--wp--preset--color--brand-e);
  }

  &__inner-container > *:first-child { margin-top: 0; }

  h3 {
    margin: 0;
    padding: 1rem 0;

    &:has(button) { padding: 0; }

    button {
      @include add-button-pseudo-element-indicator;
      background: none;
      border: none;
      cursor: pointer;
      display: block;
      font-family: inherit;
      font-size: inherit;
      font-weight: inherit;
      line-height: inherit;
      margin: 0;
      padding: 1rem 1rem 1rem 2rem;
      position: relative;
      text-align: left;
      width: 100%;
      -webkit-appearance: none;
      -webkit-border-radius: 0;

      &[aria-expanded="true"]::before {
        margin-top: -.5rem;
        transform: rotate(135deg);
      }

    }

  }

  &__inner-container {

    > .wp-block-group {
      max-height: 0;
      opacity: 0;
      padding: 0 0 2rem 2rem;
      position: relative;
      transition: opacity .25s linear, max-height .25s linear;
      z-index: 2;
    }

  }

  .wp-block-group {

    &.hide-overflow { overflow: hidden }

    &.is-visible { opacity: 1 }

    &.is-leaving { opacity: 0 }

    &.is-hidden { display: none }

  }

}