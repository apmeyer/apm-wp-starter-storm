{"version":3,"names":["mobileMenuButton","document","getElementById","mobileMenuWrap","menuItems","querySelectorAll","breakpoint","isTransitioning","onHeaderResize","subMenus","window","innerWidth","forEach","submenu","removeAttribute","style","maxHeight","scrollHeight","hideMobileMenu","classList","remove","setAttribute","setTimeout","addMobileSubmenuButtons","item","menuItemId","getAttribute","a","querySelector","subMenuId","button","createElement","after","showDesktopSubmenu","timer","clearTimeout","addEventListeners","addEventListener","event","preventDefault","add","key","contains","relatedTarget","mobileSubmenuButtons","menuId","menu","display","ResizeObserver","observe","siteHeader"],"sources":["../../src/js/modules/_site-header.js","../../src/js/theme.js"],"sourcesContent":["const mobileMenuButton  = document.getElementById( 'mobileMenuButton' )\nconst mobileMenuWrap    = document.getElementById( 'mobileMenuWrap' )\nconst siteNav           = document.getElementById( 'siteNav' )\nconst menuItems         = document.querySelectorAll( '.main-menu .menu-item-has-children' )\nconst breakpoint        = 950\nconst devMode           = true\nlet isTransitioning     = false\n\n\nconst init = function() {\n\n    if ( mobileMenuButton && mobileMenuWrap ) {\n        addMobileSubmenuButtons()\n        addEventListeners()\n    }\n\n    const headerResizeObserver = new ResizeObserver( onHeaderResize )\n    headerResizeObserver.observe( document.querySelector( '.site-header-wrap' ) );\n\n}\n\n\nconst onHeaderResize = function() {\n\n    const subMenus = document.querySelectorAll('.sub-menu')\n\n    if ( window.innerWidth >= breakpoint ) {\n        subMenus.forEach( submenu => {\n            submenu.removeAttribute('style')\n        } )\n    } else {\n        subMenus.forEach( submenu => {\n            submenu.style.maxHeight = submenu.scrollHeight + \"px\"\n        } )\n    }\n\n}\n\n\nconst displayMobileMenu = function() {\n    mobileMenuWrap.classList.add('is-block')\n    mobileMenuButton.setAttribute( 'aria-expanded', 'true' )\n    setTimeout( () => {\n        mobileMenuWrap.classList.add('transition-in')\n    }, 5 )\n}\n\n\nconst hideMobileMenu = function() {\n    mobileMenuWrap.classList.remove('transition-in')\n    mobileMenuButton.setAttribute( 'aria-expanded', 'false' )\n    setTimeout( () => {\n        mobileMenuWrap.classList.remove('is-block')\n    }, 250 )\n}\n\n\nconst addMobileSubmenuButtons = function() {\n\n    menuItems.forEach( item => {\n\n        const menuItemId = item.getAttribute( 'id' )\n        const a = item.querySelector( 'a' )\n        const subMenu = item.querySelector( '.sub-menu' )\n        const subMenuId = menuItemId + '_submenu';\n\n        subMenu.setAttribute( 'id', subMenuId )\n\n        a.setAttribute( 'aria-expanded', 'false' )\n\n        const button = document.createElement('button')\n        button.setAttribute( 'aria-controls', subMenuId );\n        button.setAttribute( 'aria-expanded', 'false' )\n        button.setAttribute( 'class', 'mobile-submenu-button' )\n\n        a.after( button )\n\n    } )\n\n}\n\n\nconst hideAllSubmenusOnDesktop = function() {\n    if ( window.innerWidth >= breakpoint ) {\n        menuItems.forEach( item => {\n            item.querySelector( 'a' ).setAttribute( 'aria-expanded', 'false' )\n        } )\n    }\n}\n\n\nconst showDesktopSubmenu = function( item, timer ) {\n    if ( window.innerWidth >= breakpoint ) {\n        clearTimeout( timer )\n        hideAllSubmenusOnDesktop()\n        item.querySelector( 'a' ).setAttribute( 'aria-expanded', 'true' )\n    }\n}\n\n\nconst addEventListeners = function() {\n\n    if ( !mobileMenuButton || !menuItems ) return\n\n    // Toggle the menu on button click\n    mobileMenuButton.addEventListener( 'click', ( event ) => {\n\n        event.preventDefault()\n\n        if ( isTransitioning ) return\n\n        if ( mobileMenuButton.getAttribute('aria-expanded') === 'true' ) {\n            hideMobileMenu()\n        } else {\n            displayMobileMenu()\n        }\n\n        isTransitioning = false\n\n    })\n\n    // If user hits the escape key, close the menu\n    document.addEventListener( 'keydown', ( event ) => {\n        if ( event.key === 'Escape' ) {\n            hideMobileMenu()\n        }\n    } )\n\n    // If focus leaves the menu, close the menu\n    if ( !devMode && siteNav ) {\n        siteNav.addEventListener( 'focusout', ( event ) => {\n            if ( !siteNav.contains( event.relatedTarget ) ) {\n                hideMobileMenu()\n            }\n        } )\n    }\n\n    // Setup desktop submenu behavior for hover and focus\n    menuItems.forEach( item => {\n\n        let timer = null\n        const a = item.querySelector( 'a' )\n\n        // On wide screens, show submenu on hover\n        item.addEventListener( 'mouseover', () => {\n            showDesktopSubmenu( item, timer )\n        } )\n\n        // On wide screens, show submenu on focus\n        a.addEventListener( 'focus', () => {\n            showDesktopSubmenu( item, timer )\n        } )\n\n        // On wide screens, hide menu on mouse out\n        item.addEventListener( 'mouseout', () => {\n            if ( window.innerWidth >= breakpoint ) {\n                timer = setTimeout( () => {\n                    item.querySelector( 'a' ).setAttribute( 'aria-expanded', 'false' )\n                }, 500 )\n            }\n        } )\n\n        // On wide screens, hide menu on focus out\n        item.addEventListener( 'focusout', event => {\n            if ( window.innerWidth >= breakpoint ) {\n                timer = setTimeout( () => {\n                    if ( !item.contains( event.relatedTarget ) ) {\n                        item.querySelector( 'a' ).setAttribute( 'aria-expanded', 'false' )\n                    }\n                }, 500 )\n            }\n        } )\n\n    } )\n\n    const mobileSubmenuButtons = document.querySelectorAll( '.mobile-submenu-button' )\n\n    // Setup mobile submenu expanding\n    if ( mobileSubmenuButtons ) {\n        mobileSubmenuButtons.forEach( button => {\n\n            const menuId = button.getAttribute( 'aria-controls' )\n            const menu = document.getElementById( menuId )\n\n            button.addEventListener( 'click', event => {\n\n                event.preventDefault()\n\n                if ( isTransitioning ) return\n\n                isTransitioning = true\n\n                if ( button.getAttribute('aria-expanded') === 'false' ) {\n                    button.setAttribute( 'aria-expanded', 'true' )\n                    menu.style.display = 'block'\n                    setTimeout( () => {\n                        menu.style.maxHeight = menu.scrollHeight + \"px\"\n                    }, 5 )\n                } else {\n                    button.setAttribute( 'aria-expanded', 'false' )\n                    menu.style.maxHeight = 0 + \"px\"\n                    setTimeout( () => {\n                        menu.removeAttribute( 'style' )\n                    }, 250 )\n                }\n\n                setTimeout( () => {\n                    isTransitioning = false\n                }, 250)\n\n            } )\n        } )\n    }\n\n}\n\n\nconst api = {\n    init: init\n}\n\nexport default api;","import { default as siteHeader } from \"./modules/_site-header\"\n\n(() => {\n\n    siteHeader.init()\n\n})();"],"mappings":"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"}